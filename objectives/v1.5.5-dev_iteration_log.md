âœ… KTP Webstack v1.5.4-dev â€“ Release Summary

ðŸ†• New Features
System Meta Page (system_meta.php): Introduced a comprehensive dashboard displaying meta information across all .php files, including word counts, presence of meta tags, and other SEO-related data.
Enhanced Analytics (analytics.php): Expanded the analytics dashboard to provide deeper insights into user agents, enabling better tracking of page visits and user behavior.
ðŸ› ï¸ Bug Fixes
Accurate Word Counts: Resolved an issue where PHP files were showing incorrect word counts by replacing str_word_count() with preg_match_all() to accurately count words in files containing PHP code.
Improved System Health Display: Replaced the raw print_r() output with a more user-friendly, labeled format for displaying system health metrics, enhancing readability for non-technical users.
ðŸ”§ UI Enhancements
Admin Navigation Update: Updated the admin navigation bar to include the new System Meta page, ensuring seamless access to the latest features.
---
#### [2025-05-24 14:03:29 AEST][v1.5.5-dev]
root@ssdnodes-605e9a6080011:/opt/webstack/bin# ./update_version.sh v1.5.5-dev

[master 4fdcea8] â¬†ï¸ Version bump: v1.5.5-dev

Â 23 files changed, 1017 insertions(+), 3 deletions(-)

Â create mode 100755 bin/git_debug.sh

Â create mode 100644 objectives/images/3B01E5FC-E233-4D4A-8F4B-FD6F35A36AB4.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.06.47.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.10.39.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.21.28.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.23.43.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.30.21.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.32.09.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.34.49.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.38.31.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.40.17.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.44.09.png

Â create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.50.25.png

Â create mode 100644 objectives/v1.5.4-dev_iteration_log.md

Â create mode 100644 objectives/v1.5.4-dev_objectives.md

Enumerating objects: 44, done.

Counting objects: 100% (42/42), done.

Delta compression using up to 12 threads

Compressing objects: 100% (29/29), done.

Writing objects: 100% (30/30), 9.49 MiB | 4.09 MiB/s, done.

Total 30 (delta 9), reused 0 (delta 0), pack-reused 0

remote: Resolving deltas: 100% (9/9), completed with 8 local objects.

To github.com:jasonhollis/webstack.git

Â Â  cc64cb7..4fdcea8Â  master -> master

Enumerating objects: 1, done.

Counting objects: 100% (1/1), done.

Writing objects: 100% (1/1), 169 bytes | 169.00 KiB/s, done.

Total 1 (delta 0), reused 0 (delta 0), pack-reused 0

To github.com:jasonhollis/webstack.git

Â * [new tag] Â  Â  Â  Â  v1.5.5-dev -> v1.5.5-dev

[Sat May 24 02:03:08 PM AEST 2025] ðŸ“¦ Snapshot created: webstack-v1.5.5-dev-2025-05-24-140300.zip

âœ… Version v1.5.5-dev deployed, committed, tagged, pushed, snapshotted, and logs preserved.

root@ssdnodes-605e9a6080011:/opt/webstack/bin#Â 


---
#### [2025-05-24 14:04:30 AEST][v1.5.5-dev]
Resume KTP Webstack context from v1.5.4-dev


---
#### [2025-05-24 14:08:54 AEST][v1.5.5-dev]
root@ssdnodes-605e9a6080011:/opt/webstack/bin# cd /opt/webstack/html

  


echo "ðŸ“„ Meta Tag Report (All .php files)"

echo "-----------------------------------"

  


for f in $(find . -maxdepth 1 -name "*.php"); do

Â  file=$(basename "$f")

Â  words=$(grep -oE '\w+' "$f" | wc -w)

Â  has_desc=$(grep -c '<meta name="description"' "$f")

Â  has_title=$(grep -c '<title>' "$f")

Â  has_robots=$(grep -c '<meta name="robots"' "$f")

  


Â  printf "%-20s | ðŸ“ %4s words | %s | %s | %s
" "$file" "$words" \

Â  Â  "$( [[ $has_desc -gt 0 ]] && echo âœ… || echo âŒNoMeta )" \

Â  Â  "$( [[ $has_title -gt 0 ]] && echo âœ… || echo âŒNoTitle )" \

Â  Â  "$( [[ $has_robots -gt 0 ]] && echo âš ï¸Robots || echo OK )"

done

ðŸ“„ Meta Tag Report (All .php files)

\-----------------------------------

index-test.php Â  Â  Â  | ðŸ“Â  505 words | âŒNoMeta | âœ… | OK

about.phpÂ  Â  Â  Â  Â  Â  | ðŸ“Â  417 words | âŒNoMeta | âŒNoTitle | OK

nav.phpÂ  Â  Â  Â  Â  Â  Â  | ðŸ“Â  488 words | âŒNoMeta | âŒNoTitle | OK

Parsedown.phpÂ  Â  Â  Â  | ðŸ“ 3631 words | âŒNoMeta | âŒNoTitle | OK

layout.php Â  Â  Â  Â  Â  | ðŸ“Â  515 words | âœ… | âœ… | OK

mac.phpÂ  Â  Â  Â  Â  Â  Â  | ðŸ“Â  328 words | âœ… | âŒNoTitle | OK

methodology.phpÂ  Â  Â  | ðŸ“Â  666 words | âœ… | âŒNoTitle | OK

tailscale.phpÂ  Â  Â  Â  | ðŸ“Â  357 words | âœ… | âœ… | OK

smallbiz.php Â  Â  Â  Â  | ðŸ“Â  348 words | âŒNoMeta | âŒNoTitle | OK

nextdns.phpÂ  Â  Â  Â  Â  | ðŸ“Â  356 words | âœ… | âœ… | OK

contact.phpÂ  Â  Â  Â  Â  | ðŸ“Â  108 words | âŒNoMeta | âŒNoTitle | OK

ping.php Â  Â  Â  Â  Â  Â  | ðŸ“Â  Â  9 words | âŒNoMeta | âŒNoTitle | OK

nas.phpÂ  Â  Â  Â  Â  Â  Â  | ðŸ“Â  788 words | âœ… | âŒNoTitle | OK

macos-tools.phpÂ  Â  Â  | ðŸ“Â  673 words | âœ… | âŒNoTitle | OK

analytics_logger.php | ðŸ“ Â  83 words | âŒNoMeta | âŒNoTitle | OK

automation.php Â  Â  Â  | ðŸ“Â  378 words | âŒNoMeta | âŒNoTitle | OK

index.phpÂ  Â  Â  Â  Â  Â  | ðŸ“Â  337 words | âŒNoMeta | âŒNoTitle | OK

newindex.php Â  Â  Â  Â  | ðŸ“Â  505 words | âŒNoMeta | âœ… | OK

enterprise.php Â  Â  Â  | ðŸ“Â  168 words | âŒNoMeta | âŒNoTitle | OK

root@ssdnodes-605e9a6080011:/opt/webstack/html#Â 


---
#### [2025-05-24 14:12:19 AEST][v1.5.5-dev]
Great you should be able to see all of that now at https://www.ktp.digital/admin/objectives.php why do you kick out the new full system_meta.php and the admin_nav.php and whatever else is required.Â  Let's see if you can build the whole release in one quick move


---
#### [2025-05-24 14:28:25 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.28.12.png)


---
#### [2025-05-24 14:28:43 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.28.30.png)


---
#### [2025-05-24 14:28:55 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.27.54.png)


---
#### [2025-05-24 14:31:04 AEST][v1.5.5-dev]
I want to make a quick change to Top User Agents on the Analytics page before we do anything else.Â  Can you expand that out somehow?Â  I specifically want to be able to see when you have hit pages because I think you use a specific user agent


---
#### [2025-05-24 14:34:46 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.34.33.png)


---
#### [2025-05-24 14:54:27 AEST][v1.5.5-dev]
Those are all great thoughts for a future release.Â  I have put them in the objectives log.Â  Please have a look yourself at https://www.ktp.digital/admin/objectives.php at some point very soon we need to build a roadmap page similar to objectives for longer term items with a method for taking things like what I just captured and consolidating them into something cleaner.Â  For now I want to finish our work on the system meta page and close this release out.Â  Have another look at https://www.ktp.digital/admin/system_meta.php after you are done with objectives and tell me what's next


---
#### [2025-05-24 14:58:38 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.58.28.png)


---
#### [2025-05-24 14:59:07 AEST][v1.5.5-dev]
OK give me a bash wc command to test everything in your list there


---
#### [2025-05-24 15:00:08 AEST][v1.5.5-dev]
root@ssdnodes-605e9a6080011:/opt/webstack/html# cd /opt/webstack/html && for f in *.php; do wc=$(grep -oE '\w+' "$f" | wc -w); printf "%-20s %5s words
" "$f" "$wc"; done

about.phpÂ  Â  Â  Â  Â  Â  Â  417 words

analytics_logger.phpÂ  Â  83 words

automation.php Â  Â  Â  Â  378 words

contact.phpÂ  Â  Â  Â  Â  Â  108 words

enterprise.php Â  Â  Â  Â  168 words

index.phpÂ  Â  Â  Â  Â  Â  Â  337 words

index-test.php Â  Â  Â  Â  505 words

layout.php Â  Â  Â  Â  Â  Â  515 words

macos-tools.phpÂ  Â  Â  Â  673 words

mac.phpÂ  Â  Â  Â  Â  Â  Â  Â  328 words

methodology.phpÂ  Â  Â  Â  666 words

nas.phpÂ  Â  Â  Â  Â  Â  Â  Â  788 words

nav.phpÂ  Â  Â  Â  Â  Â  Â  Â  488 words

newindex.php Â  Â  Â  Â  Â  505 words

nextdns.phpÂ  Â  Â  Â  Â  Â  356 words

Parsedown.php Â  Â  Â  Â  3631 words

ping.php Â  Â  Â  Â  Â  Â  Â  Â  9 words

smallbiz.php Â  Â  Â  Â  Â  348 words

tailscale.phpÂ  Â  Â  Â  Â  357 words

root@ssdnodes-605e9a6080011:/opt/webstack/html#Â 


---
#### [2025-05-24 15:00:36 AEST][v1.5.5-dev]
You may have a bug there cowboy!


---
#### [2025-05-24 15:01:12 AEST][v1.5.5-dev]
ðŸ˜… Caught fair and square, cowboy. You're right â€” that is a bug in the system_meta.php logic.

  


ðŸž Bug Summary

In the UI, many files are showing 0 words, but the Bash grep \+ wc -w method shows accurate counts like:

  


macos-tools.phpÂ  Â  Â  673 words

methodology.phpÂ  Â  Â  666 words

...

The bug is in this line of the PHP script:

  


$words = str_word_count(strip_tags($contents));

That function:

  * Excludes underscores, numbers, symbols, and anything non-ASCII
  * Fails silently if the content is mostly PHP

  


âœ… Fix Plan for system_meta.php

Replace:

  


$words = str_word_count(strip_tags($contents));

With:

  


$words = preg_match_all('/\w+/u', strip_tags($contents), $matches);

This mirrors your Bash test:

  


grep -oE '\w+' file | wc -w

  


ðŸ“Œ TL;DR

  * Yes, PHP str_word_count() silently undercounts
  * Use preg_match_all('/\w+/u', ...) instead
  * Bug confirmed, fix is clear, you're not crazy

Want the updated full system_meta.php file with that fixed now?


---
#### [2025-05-24 15:02:43 AEST][v1.5.5-dev]



---
#### [2025-05-24 15:05:33 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-15.05.20.png)


---
#### [2025-05-24 15:17:05 AEST][v1.5.5-dev]
![](/admin/objectives/images/CleanShot-2025-05-24-at-15.16.41@2x.png)

