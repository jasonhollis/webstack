✅ KTP Webstack v1.5.4-dev – Release Summary

🆕 New Features
System Meta Page (system_meta.php): Introduced a comprehensive dashboard displaying meta information across all .php files, including word counts, presence of meta tags, and other SEO-related data.
Enhanced Analytics (analytics.php): Expanded the analytics dashboard to provide deeper insights into user agents, enabling better tracking of page visits and user behavior.
🛠️ Bug Fixes
Accurate Word Counts: Resolved an issue where PHP files were showing incorrect word counts by replacing str_word_count() with preg_match_all() to accurately count words in files containing PHP code.
Improved System Health Display: Replaced the raw print_r() output with a more user-friendly, labeled format for displaying system health metrics, enhancing readability for non-technical users.
🔧 UI Enhancements
Admin Navigation Update: Updated the admin navigation bar to include the new System Meta page, ensuring seamless access to the latest features.
---
#### [2025-05-24 14:03:29 AEST][v1.5.5-dev]
root@ssdnodes-605e9a6080011:/opt/webstack/bin# ./update_version.sh v1.5.5-dev

[master 4fdcea8] ⬆️ Version bump: v1.5.5-dev

 23 files changed, 1017 insertions(+), 3 deletions(-)

 create mode 100755 bin/git_debug.sh

 create mode 100644 objectives/images/3B01E5FC-E233-4D4A-8F4B-FD6F35A36AB4.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.06.47.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.10.39.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.21.28.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.23.43.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.30.21.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.32.09.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.34.49.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.38.31.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.40.17.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.44.09.png

 create mode 100644 objectives/images/Screenshot-2025-05-24-at-13.50.25.png

 create mode 100644 objectives/v1.5.4-dev_iteration_log.md

 create mode 100644 objectives/v1.5.4-dev_objectives.md

Enumerating objects: 44, done.

Counting objects: 100% (42/42), done.

Delta compression using up to 12 threads

Compressing objects: 100% (29/29), done.

Writing objects: 100% (30/30), 9.49 MiB | 4.09 MiB/s, done.

Total 30 (delta 9), reused 0 (delta 0), pack-reused 0

remote: Resolving deltas: 100% (9/9), completed with 8 local objects.

To github.com:jasonhollis/webstack.git

   cc64cb7..4fdcea8  master -> master

Enumerating objects: 1, done.

Counting objects: 100% (1/1), done.

Writing objects: 100% (1/1), 169 bytes | 169.00 KiB/s, done.

Total 1 (delta 0), reused 0 (delta 0), pack-reused 0

To github.com:jasonhollis/webstack.git

 * [new tag]         v1.5.5-dev -> v1.5.5-dev

[Sat May 24 02:03:08 PM AEST 2025] 📦 Snapshot created: webstack-v1.5.5-dev-2025-05-24-140300.zip

✅ Version v1.5.5-dev deployed, committed, tagged, pushed, snapshotted, and logs preserved.

root@ssdnodes-605e9a6080011:/opt/webstack/bin# 


---
#### [2025-05-24 14:04:30 AEST][v1.5.5-dev]
Resume KTP Webstack context from v1.5.4-dev


---
#### [2025-05-24 14:08:54 AEST][v1.5.5-dev]
root@ssdnodes-605e9a6080011:/opt/webstack/bin# cd /opt/webstack/html

  


echo "📄 Meta Tag Report (All .php files)"

echo "-----------------------------------"

  


for f in $(find . -maxdepth 1 -name "*.php"); do

  file=$(basename "$f")

  words=$(grep -oE '\w+' "$f" | wc -w)

  has_desc=$(grep -c '<meta name="description"' "$f")

  has_title=$(grep -c '<title>' "$f")

  has_robots=$(grep -c '<meta name="robots"' "$f")

  


  printf "%-20s | 📝 %4s words | %s | %s | %s
" "$file" "$words" \

    "$( [[ $has_desc -gt 0 ]] && echo ✅ || echo ❌NoMeta )" \

    "$( [[ $has_title -gt 0 ]] && echo ✅ || echo ❌NoTitle )" \

    "$( [[ $has_robots -gt 0 ]] && echo ⚠️Robots || echo OK )"

done

📄 Meta Tag Report (All .php files)

\-----------------------------------

index-test.php       | 📝  505 words | ❌NoMeta | ✅ | OK

about.php            | 📝  417 words | ❌NoMeta | ❌NoTitle | OK

nav.php              | 📝  488 words | ❌NoMeta | ❌NoTitle | OK

Parsedown.php        | 📝 3631 words | ❌NoMeta | ❌NoTitle | OK

layout.php           | 📝  515 words | ✅ | ✅ | OK

mac.php              | 📝  328 words | ✅ | ❌NoTitle | OK

methodology.php      | 📝  666 words | ✅ | ❌NoTitle | OK

tailscale.php        | 📝  357 words | ✅ | ✅ | OK

smallbiz.php         | 📝  348 words | ❌NoMeta | ❌NoTitle | OK

nextdns.php          | 📝  356 words | ✅ | ✅ | OK

contact.php          | 📝  108 words | ❌NoMeta | ❌NoTitle | OK

ping.php             | 📝    9 words | ❌NoMeta | ❌NoTitle | OK

nas.php              | 📝  788 words | ✅ | ❌NoTitle | OK

macos-tools.php      | 📝  673 words | ✅ | ❌NoTitle | OK

analytics_logger.php | 📝   83 words | ❌NoMeta | ❌NoTitle | OK

automation.php       | 📝  378 words | ❌NoMeta | ❌NoTitle | OK

index.php            | 📝  337 words | ❌NoMeta | ❌NoTitle | OK

newindex.php         | 📝  505 words | ❌NoMeta | ✅ | OK

enterprise.php       | 📝  168 words | ❌NoMeta | ❌NoTitle | OK

root@ssdnodes-605e9a6080011:/opt/webstack/html# 


---
#### [2025-05-24 14:12:19 AEST][v1.5.5-dev]
Great you should be able to see all of that now at https://www.ktp.digital/admin/objectives.php why do you kick out the new full system_meta.php and the admin_nav.php and whatever else is required.  Let's see if you can build the whole release in one quick move


---
#### [2025-05-24 14:28:25 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.28.12.png)


---
#### [2025-05-24 14:28:43 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.28.30.png)


---
#### [2025-05-24 14:28:55 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.27.54.png)


---
#### [2025-05-24 14:31:04 AEST][v1.5.5-dev]
I want to make a quick change to Top User Agents on the Analytics page before we do anything else.  Can you expand that out somehow?  I specifically want to be able to see when you have hit pages because I think you use a specific user agent


---
#### [2025-05-24 14:34:46 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.34.33.png)


---
#### [2025-05-24 14:54:27 AEST][v1.5.5-dev]
Those are all great thoughts for a future release.  I have put them in the objectives log.  Please have a look yourself at https://www.ktp.digital/admin/objectives.php at some point very soon we need to build a roadmap page similar to objectives for longer term items with a method for taking things like what I just captured and consolidating them into something cleaner.  For now I want to finish our work on the system meta page and close this release out.  Have another look at https://www.ktp.digital/admin/system_meta.php after you are done with objectives and tell me what's next


---
#### [2025-05-24 14:58:38 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-14.58.28.png)


---
#### [2025-05-24 14:59:07 AEST][v1.5.5-dev]
OK give me a bash wc command to test everything in your list there


---
#### [2025-05-24 15:00:08 AEST][v1.5.5-dev]
root@ssdnodes-605e9a6080011:/opt/webstack/html# cd /opt/webstack/html && for f in *.php; do wc=$(grep -oE '\w+' "$f" | wc -w); printf "%-20s %5s words
" "$f" "$wc"; done

about.php              417 words

analytics_logger.php    83 words

automation.php         378 words

contact.php            108 words

enterprise.php         168 words

index.php              337 words

index-test.php         505 words

layout.php             515 words

macos-tools.php        673 words

mac.php                328 words

methodology.php        666 words

nas.php                788 words

nav.php                488 words

newindex.php           505 words

nextdns.php            356 words

Parsedown.php         3631 words

ping.php                 9 words

smallbiz.php           348 words

tailscale.php          357 words

root@ssdnodes-605e9a6080011:/opt/webstack/html# 


---
#### [2025-05-24 15:00:36 AEST][v1.5.5-dev]
You may have a bug there cowboy!


---
#### [2025-05-24 15:01:12 AEST][v1.5.5-dev]
😅 Caught fair and square, cowboy. You're right — that is a bug in the system_meta.php logic.

  


🐞 Bug Summary

In the UI, many files are showing 0 words, but the Bash grep \+ wc -w method shows accurate counts like:

  


macos-tools.php      673 words

methodology.php      666 words

...

The bug is in this line of the PHP script:

  


$words = str_word_count(strip_tags($contents));

That function:

  * Excludes underscores, numbers, symbols, and anything non-ASCII
  * Fails silently if the content is mostly PHP

  


✅ Fix Plan for system_meta.php

Replace:

  


$words = str_word_count(strip_tags($contents));

With:

  


$words = preg_match_all('/\w+/u', strip_tags($contents), $matches);

This mirrors your Bash test:

  


grep -oE '\w+' file | wc -w

  


📌 TL;DR

  * Yes, PHP str_word_count() silently undercounts
  * Use preg_match_all('/\w+/u', ...) instead
  * Bug confirmed, fix is clear, you're not crazy

Want the updated full system_meta.php file with that fixed now?


---
#### [2025-05-24 15:02:43 AEST][v1.5.5-dev]



---
#### [2025-05-24 15:05:33 AEST][v1.5.5-dev]
![](/admin/objectives/images/Screenshot-2025-05-24-at-15.05.20.png)


---
#### [2025-05-24 15:17:05 AEST][v1.5.5-dev]
![](/admin/objectives/images/CleanShot-2025-05-24-at-15.16.41@2x.png)

